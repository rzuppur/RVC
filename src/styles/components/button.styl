@keyframes spinAround
  from
    transform rotate(0deg)
  to
    transform rotate(359deg)

.r-button
  control()
  cursor pointer
  user-select none
  white-space nowrap
  text-align center
  color $color-text
  background-color $color-white

  .darkMode &
    background-color transparent
    color $color-text-darkmode

  &.borderless
    background-color transparent
    box-shadow none
    border none

    &:hover
      background alpha($color-black, 0.04)

      .darkMode &
        background alpha($color-white, 0.08)

  &.primary
    background $color-button-cta
    box-shadow none
    color $color-white

    &:hover,
    &:focus
      background darken($color-button-cta, 3)

    &:focus:not(:active)
      box-shadow inset 0 0 0 2px $color-button-cta, inset 0 0 0 4px $color-white !important

      .darkMode &
        box-shadow inset 0 0 0 2px $color-button-cta, inset 0 0 0 4px $color-background-darkmode !important

  &.gray
    background alpha($color-black, 0.04)

    .darkMode &
      background alpha($color-white, 0.1)

  &[disabled]
    box-shadow none !important
    opacity 0.4

  &.icon-only
    width $height-input
    min-width @width
    padding 0

    &.small
      width $height-input-small
      min-width @width

  &:not(.icon-only)
    min-width 65px

  &.loading
    color transparent !important
    pointer-events none

    & > span
      opacity 0

    &::after
      content ""
      width 18px
      height @width
      border 2px solid transparent
      border-top-color alpha($color-black, 0.3)
      border-right-color alpha($color-black, 0.3)
      border-radius 100%
      animation spinAround 0.6s infinite linear
      position absolute !important

      .darkMode &
        border-top-color alpha($color-white, 0.4)
        border-right-color alpha($color-white, 0.4)

  &:not(.muted) > span:not(.icon)
    font-sans($font-size-normal, $font-weight-sans-bold)

  & > span
    transition opacity 75ms

    &:not(.r-icon)
      position relative
      white-space nowrap
      overflow hidden
      text-overflow ellipsis

  & > .r-icon

    &:first-child:not(:last-child)
      margin-left -2px
      margin-right 8px

    &:last-child:not(:first-child)
      margin-left 8px
      margin-right -2px

    &:first-child:last-child
      margin-left 0
      margin-right 0

&.small > .r-icon

  &:first-child:not(:last-child)
    margin-left -4px
    margin-right 5px

  &:last-child:not(:first-child)
    margin-right -4px
    margin-left 5px


$_buttons_margin = $space-tiny

.r-buttons
  margin-right -($_buttons_margin)
  margin-bottom -($_buttons_margin)
  display flex
  flex-direction row
  flex-wrap wrap
  align-items center

  .r-button
    margin-right $_buttons_margin
    margin-bottom $_buttons_margin
    flex 0 0 auto

.r-buttons-grouped
  margin-right -($_buttons_margin)
  margin-bottom -($_buttons_margin)

  .r-button-group
    display inline-block
    margin-right $_buttons_margin
    margin-bottom $_buttons_margin

    .r-button + .r-button
      border-top-left-radius 0
      border-bottom-left-radius 0
      margin-left -1px

    .r-button

      &:hover,
      &:focus
        z-index 1

      &:not(:last-child)
        border-top-right-radius 0
        border-bottom-right-radius 0
